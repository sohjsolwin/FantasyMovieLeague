<%
	header = "'%s', "
	model = "{name:'%s', align:'right', index:'%s', width:35, sorttype:'int'},\r\n"
%>

<script type="text/javascript">

$(function(){ 
 
    $("#shares").jqGrid({
    datatype: 'json',
	mtype: 'GET',
    colNames:['Movie', 'Rel.', 'Total', <% @players.each do |p| %><%= header.html_safe % p.short_name -%><% end %>],
    colModel :[ 
	  {name:'movie', index:'movie', width:150},
	  {name:'releasedate', index:'releasedate', width:80},
      {name:'total', classes:'tbl_bold', align:'right', index:'total', sorttype:'int', width:50},
	  <% @players.each do |p| %>
		<%= model.html_safe % [p.short_name, p.short_name] %>
	  <% end %>
    ],
    rowNum:100,
	url: '/api/shares/<%= params[:team] %>',
    sortname: 'releasedate',
    sortorder: 'asc',
	jsonReader : {
		repeatitems: false
	},
	height:'auto',
    viewrecords: true,
    gridview: true,
    caption: 'Share Distribution'
  });
  
}); 

</script>

<br/><br/><br/>
<center><table id="shares"><tr><td/></tr></table></center>